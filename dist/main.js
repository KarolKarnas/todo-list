(()=>{"use strict";class t{static getProjects(){let t;return t=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),t}static saveProject(e){const o=t.getProjects();o.push(e),localStorage.setItem("projects",JSON.stringify(o))}static saveTodo(e,o){const c=t.getProjects();c[e].todo.push(o),localStorage.setItem("projects",JSON.stringify(c))}static getAllTodos(){let t,e;return null===localStorage.getItem("projects")?t=[]:(t=JSON.parse(localStorage.getItem("projects")),e=t.forEach((t=>{t.todo}))),e}}const e=t;new class{constructor(){this._tracker=new class{constructor(){this._todos=e.getProjects(),this._projects=e.getProjects(),this._checkEmpty()}addTodoToProject(t,o){this._projects[t].todo.push(o),e.saveTodo(t,o),this._render(t)}addProject(t){this._projects.push(t),e.saveProject(t)}_displayTodo(t,e){const o=document.getElementById("todo-list"),c=document.createElement("li");c.classList.add("todo-single"),c.setAttribute("data-id",t.id),c.innerHTML=`\n\t\t<div class="col-1">\n\t\t<input class="checkbox" type="checkbox" />\n\t</div>\n\t<div class="col-2">\n\t\t<div class="todo-title">${t.title}</div>\n\t\t<div class="todo-project-name">${this._projects[e].name}</div>\n\t\t<div class="todo-description">\n\t\t${t.description}\n\t\t</div>\n\t\t<div class="todo-priority todo-priority-1">${t.priority}</div>\n\t</div>\n\t<div class="col-3">\n\t\t<input type="date" disabled="true" value="${t.dueDate}" />\n\t\t<div class="todo-icons-container">\n\t\t\t<i class="material-symbols-outlined todo-icon-edit">edit</i>\n\t\t\t<i class="material-symbols-outlined todo-icon-delete">delete</i>\n\t\t</div>\n\t</div>`,o.appendChild(c)}_createExistingProjectsModal(){const t=document.getElementById("selectProject");this._projects.forEach((e=>{let o=document.createElement("option");o.textContent=e.name,o.setAttribute("value",`${e.name}`),o.setAttribute("data-id",`${e.id}`),t.appendChild(o)}))}_clearExistingProjectsModal(){const t=document.getElementById("selectProject");for(;t.firstChild;)t.removeChild(t.firstChild)}_checkEmpty(){0===this._todos.length&&(e.saveProject({id:"bef36e0e1b027",name:"FIX the World2",todo:[]}),e.saveTodo(0,{id:"ca079bdcb9ba2",title:"Rebuild Houses",description:"Atque",dueDate:"2023-02-03",priority:"Priority 2",checklist:!0}))}_clearMainTodoList(){const t=document.getElementById("todo-list");for(;t.firstChild;)t.removeChild(t.firstChild)}_createProjectsList(){this._projects.forEach(((t,e)=>{const o=document.querySelector("#all-projects"),c=document.createElement("li");c.textContent=t.name,c.classList.add("new-project"),c.setAttribute("data-id",t.id),c.setAttribute("data-project-Index",e),o.insertAdjacentElement("afterend",c),c.addEventListener("click",(t=>{this._render(t.target.dataset.projectIndex)}))}))}_clearProjectsList(){document.querySelectorAll(".new-project").forEach((t=>{t.remove()}))}_changeTitle(t){const e=document.getElementById("title");console.log(e),e.textContent=this._projects[t].name}loadTodos(){this._clearMainTodoList(),document.getElementById("title").textContent="All Todos",this._projects.forEach(((t,e)=>t.todo.forEach((t=>this._displayTodo(t,e)))))}_render(t){console.log("render",+t),this._clearProjectsList(),this._createProjectsList(),this._clearMainTodoList(),this._projects[t].todo.forEach((e=>this._displayTodo(e,t))),this._changeTitle(t),this._clearExistingProjectsModal(),this._createExistingProjectsModal()}},this._loadModal(),this._tracker.loadTodos(),this._tracker._createExistingProjectsModal(),this._tracker._createProjectsList(),document.querySelector("#submit-btn").addEventListener("click",this._newTodo.bind(this)),document.querySelector("#li-all-todo").addEventListener("click",(()=>this._tracker.loadTodos()))}_loadModal(){document.querySelectorAll("[data-modal-target]").forEach((t=>{t.addEventListener("click",(e=>{const o=document.querySelector(t.dataset.modalTarget);this._openModal(o),e.stopPropagation()}))})),document.querySelectorAll("[data-close-button]").forEach((t=>{t.addEventListener("click",(()=>{const e=t.closest(".modal");this._closeModal(e)}))})),document.getElementById("overlay").addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((t=>{this._closeModal(t)}))}));const t=document.querySelectorAll('[name="projectOption"]'),e=document.getElementById("projectNameDiv"),o=document.getElementById("selectProjectDiv");t.forEach((t=>{t.addEventListener("change",(function(){"project-name"===this.value?(e.style.display="block",o.style.display="none"):"selectProject"===this.value&&(e.style.display="none",o.style.display="block")}))}))}_openModal(t){null!=t&&(t.classList.add("active"),overlay.classList.add("active"))}_closeModal(t){null!=t&&(this._clearInputs(),t.classList.remove("active"),overlay.classList.remove("active"))}_clearInputs(){const t=document.getElementById("project-name"),e=document.getElementById("todo-title"),o=document.getElementById("description"),c=document.getElementById("dueDate"),s=document.getElementById("priority");t.value="",e.value="",o.value="",c.value="",s.value="Priority 1"}_newTodo(t){t.preventDefault();const e=document.getElementById("projectNameOption"),o=document.getElementById("selectProjectOption"),c=document.getElementById("selectProject"),s=document.getElementById("project-name"),i=document.getElementById("todo-title"),d=document.getElementById("description"),l=document.getElementById("dueDate"),r=document.getElementById("priority"),a=new class{constructor(t="Default Title",e="Default Description",o="2023-02-03",c="Priority 1",s=!1){this.id=Math.random().toString(16).slice(2),this.title=t,this.description=e,this.dueDate=o,this.priority=c,this.checklist=s}}(i.value,d.value,l.value,r.value);if(e.checked){let t=new class{constructor(t="Deafult Project Title"){this.id=Math.random().toString(16).slice(2),this.name=t,this.todo=[]}}(s.value);this._tracker.addProject(t),this._tracker.addTodoToProject(this._tracker._projects.length-1,a)}else o.checked&&this._tracker._projects.forEach(((t,e)=>{t.name===c.value&&this._tracker.addTodoToProject(e,a)}));this._closeModal(modal)}}})();